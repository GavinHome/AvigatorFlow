(function(e){function t(t){for(var o,i,l=t[0],s=t[1],c=t[2],u=0,p=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);d&&d(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],o=!0,i=1;i<a.length;i++){var s=a[i];0!==r[s]&&(o=!1)}o&&(n.splice(t--,1),e=l(l.s=a[0]))}return e}var o={},r={app:0},n=[];function i(e){return l.p+"js/"+({about:"about"}[e]||e)+"."+{about:"9f9faed7"}[e]+".js"}function l(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a=r[e];if(0!==a)if(a)t.push(a[2]);else{var o=new Promise((function(t,o){a=r[e]=[t,o]}));t.push(a[2]=o);var n,s=document.createElement("script");s.charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.src=i(e);var c=new Error;n=function(t){s.onerror=s.onload=null,clearTimeout(u);var a=r[e];if(0!==a){if(a){var o=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+o+": "+n+")",c.name="ChunkLoadError",c.type=o,c.request=n,a[1](c)}r[e]=void 0}};var u=setTimeout((function(){n({type:"timeout",target:s})}),12e4);s.onerror=s.onload=n,document.head.appendChild(s)}return Promise.all(t)},l.m=e,l.c=o,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(a,o,function(t){return e[t]}.bind(null,o));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/AvigatorFlow/",l.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=c;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"0135":function(e,t,a){},"0408":function(e,t,a){"use strict";a("fa15")},"079c":function(e,t,a){"use strict";a("2b17")},"0a7b":function(e,t,a){"use strict";a("8782")},"0ff5":function(e){e.exports=JSON.parse('{"nodes":[{"id":"7cf75287-e220-4511-9b4b-c5820e279f23","type":"start","x":300,"y":380,"properties":{"key":"start","name":"开始","enName":"Initiator","executor":{"type":"Initiator","params":[]},"description":"","aggregation":null,"branch":"One","rule":"One","actions":["Save","Submit"]},"text":{"x":300,"y":380,"value":"开始"}},{"id":"97676a5f-38a0-44d6-89ea-b676f6407fef","type":"approval","x":500,"y":380,"properties":{"key":"approval1","name":"任务1","enName":"Approver","executor":{"type":"Designator","params":[{"type":"Designator","value":{"value":"user001","text":"用户1"}}]},"description":"","aggregation":"One","branch":"One","rule":"One","actions":["Pass","Reject","Assist"]},"text":{"x":500,"y":440,"value":"任务1"}},{"id":"77941a96-6ef4-48c1-9889-96dcb6ef79d6","type":"approval","x":700,"y":180,"properties":{"key":"approval2","name":"任务2","enName":"Approver","executor":{"type":"Role","params":[{"type":"RoleId","value":{"value":"ProjectManager","text":"项目经理"}},{"type":"VariableId","value":{"value":"abc","text":"变量1"}}]},"description":"","aggregation":"One","branch":"One","rule":"One","actions":["Pass","Reject","Assist"]},"text":{"x":700,"y":240,"value":"任务2"}},{"id":"f6acff23-254d-4fa0-bc5a-c60ea7773a88","type":"approval","x":700,"y":580,"properties":{"key":"approval3","name":"任务3","enName":"Approver","executor":{"type":"Variable","params":[{"type":"VariableId","value":{"value":"bcd","text":"变量2"}}]},"description":"","aggregation":"One","branch":"One","rule":"One","actions":["Pass","Reject","Assist"]},"text":{"x":700,"y":640,"value":"任务3"}},{"id":"2837c7c3-5177-42ad-9743-973dce197a71","type":"gateway","x":700,"y":380,"properties":{"key":"gateway","name":"网关节点","enName":"Gateway","executor":null,"description":"","aggregation":"One","branch":"One","rule":"One","actions":null},"text":{"x":700,"y":428,"value":"网关节点"}},{"id":"0b9920ef-6a3d-40bc-9101-fee887d74f9c","type":"end","x":900,"y":380,"properties":{"key":"end","name":"结束","enName":"Completer","executor":null,"description":"","aggregation":"One","branch":null,"rule":"One","actions":null},"text":{"x":900,"y":428,"value":"结束"}}],"edges":[{"id":"319e2bd7-69d0-4467-8049-f6ea667d3a05","type":"polyline","sourceNodeId":"7cf75287-e220-4511-9b4b-c5820e279f23","targetNodeId":"97676a5f-38a0-44d6-89ea-b676f6407fef","startPoint":{"x":320,"y":380},"endPoint":{"x":450,"y":380},"properties":{},"pointsList":[{"x":320,"y":380},{"x":450,"y":380}]},{"id":"e030143b-63fe-4f5a-97ba-5c7caaf66b10","type":"polyline","sourceNodeId":"97676a5f-38a0-44d6-89ea-b676f6407fef","targetNodeId":"2837c7c3-5177-42ad-9743-973dce197a71","startPoint":{"x":550,"y":380},"endPoint":{"x":675,"y":380},"properties":{},"pointsList":[{"x":550,"y":380},{"x":675,"y":380}]},{"id":"cc5333d2-8f69-468d-8c59-faef08f78a94","type":"polyline","sourceNodeId":"2837c7c3-5177-42ad-9743-973dce197a71","targetNodeId":"77941a96-6ef4-48c1-9889-96dcb6ef79d6","startPoint":{"x":700,"y":355},"endPoint":{"x":700,"y":215},"properties":{"name":"金额大于10万","condition":{"type":"Simple","expressions":[{"type":"Expression","expression":{"variable":"abc","varType":"","operator":">","value":"100000"}}]},"enName":"Condition"},"text":{"x":750,"y":295,"value":"金额大于10万"},"pointsList":[{"x":700,"y":355},{"x":700,"y":215}]},{"id":"5923f496-ec87-4076-af6a-abba7ac01438","type":"polyline","sourceNodeId":"2837c7c3-5177-42ad-9743-973dce197a71","targetNodeId":"f6acff23-254d-4fa0-bc5a-c60ea7773a88","startPoint":{"x":700,"y":405},"endPoint":{"x":700,"y":545},"properties":{},"pointsList":[{"x":700,"y":405},{"x":700,"y":545}]},{"id":"be13b9a8-80ad-4704-a5be-da6a9911f4c6","type":"polyline","sourceNodeId":"77941a96-6ef4-48c1-9889-96dcb6ef79d6","targetNodeId":"0b9920ef-6a3d-40bc-9101-fee887d74f9c","startPoint":{"x":750,"y":180},"endPoint":{"x":900,"y":360},"properties":{},"pointsList":[{"x":750,"y":180},{"x":900,"y":180},{"x":900,"y":360}]},{"id":"67035e93-8fd9-428b-8978-b1cc90a9d330","type":"polyline","sourceNodeId":"f6acff23-254d-4fa0-bc5a-c60ea7773a88","targetNodeId":"0b9920ef-6a3d-40bc-9101-fee887d74f9c","startPoint":{"x":750,"y":580},"endPoint":{"x":900,"y":400},"properties":{},"pointsList":[{"x":750,"y":580},{"x":900,"y":580},{"x":900,"y":400}]}]}')},1415:function(e,t,a){"use strict";a("99b5")},"2b17":function(e,t,a){},"36a1":function(e,t,a){},"389d":function(e,t,a){},4354:function(e,t,a){},"4be6":function(e,t,a){"use strict";a("389d")},"59f4":function(e,t,a){},"5ba4":function(e,t,a){},"5bbd":function(e,t,a){"use strict";a("d787")},"5c0b":function(e,t,a){"use strict";a("9c0c")},"6d70":function(e,t,a){"use strict";a("e75d")},"6dd7":function(e,t,a){},"73b2":function(e,t,a){"use strict";a("59f4")},"7a98":function(e,t,a){"use strict";a("6dd7")},"7eb7":function(e,t,a){},8782:function(e,t,a){},"99b5":function(e,t,a){},"9a98":function(e,t,a){},"9c0c":function(e,t,a){},"9ff4":function(e,t,a){},aee5:function(e,t,a){"use strict";a("7eb7")},b535:function(e,t,a){"use strict";a("4354")},cbbc:function(e,t,a){"use strict";a("36a1")},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("a026"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[],i=(a("5c0b"),a("2877")),l={},s=Object(i["a"])(l,r,n,!1,null,null,null),c=s.exports,u=a("9483");Object(u["a"])("".concat("/AvigatorFlow/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});a("d3b7"),a("3ca3"),a("ddb0");var d=a("8c4f"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("Flow",{attrs:{isSilentMode:!1,bodyStyle:{"padding-left":"50px","padding-right":"50px",height:"85%"}}},[a("h3",{staticClass:"text-center",staticStyle:{margin:"20px"},attrs:{slot:"title"},slot:"title"},[e._v(" AvigatorFlow ")])])],1)},f=[],b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"avigator-flow-view"},[e._t("title"),e.lf?a("Control",{staticClass:"control-menus",attrs:{lf:e.lf},on:{catData:e.catData}}):e._e(),a("NodePanel",{attrs:{lf:e.lf}}),a("div",{style:e.bodyStyle,attrs:{id:"flow-view"}}),a("el-drawer",{attrs:{title:"设置节点属性",visible:e.dialogVisible,direction:"rtl",size:"500px","before-close":e.closeDialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.dialogVisible?a("PropertyPanel",{attrs:{nodeData:e.clickNode,lf:e.lf},on:{setPropertiesFinish:e.closeDialog}}):e._e()],1),a("el-dialog",{attrs:{title:"数据",visible:e.dataVisible,width:"50%"},on:{"update:visible":function(t){e.dataVisible=t}}},[a("DataPanel",{attrs:{graphData:e.graphData}})],1)],2)},v=[],m=a("5530"),y=a("d4ec"),h=a("bee2"),g=a("262e"),x=a("2caf"),O=(a("7db0"),a("b0c0"),a("4de4"),a("9ab4")),j=a("1b40"),k=a("5e90"),D=a.n(k),_=a("eb21"),C=(a("7692"),a("417c"),function(e,t){return{textEdit:!1,isSilentMode:t,container:e,background:{color:"#f7f9ff"},style:{rect:{strokeWidth:1},circle:{r:20,strokeWidth:1},ellipse:{strokeWidth:1},diamond:{strokeWidth:1},polygon:{strokeWidth:1},anchor:{strokeWidth:1},line:{strokeWidth:1},polyline:{strokeWidth:1}},grid:{size:10,visible:!1},keyboard:{enabled:!0},hoverOutline:!0,guards:{beforeClone:function(e){return!0},beforeDelete:function(e){return!0}}}}),A=function(){return{circle:{r:20,stroke:"#000000",outlineColor:"#88f",strokeWidth:1},rect:{outlineColor:"#88f",strokeWidth:1},polygon:{strokeWidth:1},polyline:{stroke:"#000000",hoverStroke:"#000000",selectedStroke:"#000000",outlineColor:"#88f",strokeWidth:1},nodeText:{color:"#000000"},edgeText:{color:"#000000",background:{fill:"#f7f9ff"}},ellipse:{strokeWidth:1},diamond:{strokeWidth:1},anchor:{strokeWidth:1},line:{strokeWidth:1},arrow:{strokeWidth:1}}},w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button-group",[a("el-button",{staticClass:"lf-control-item",attrs:{type:"plain",size:"small"},on:{click:e.zoomIn}},[a("i",{staticClass:"lf-control-zoomIn"}),a("div",{staticClass:"lf-control-text"},[e._v("放大")])]),a("el-button",{staticClass:"lf-control-item",attrs:{type:"plain",size:"small"},on:{click:e.zoomOut}},[a("i",{staticClass:"lf-control-zoomOut"}),a("div",{staticClass:"lf-control-text"},[e._v("缩小")])]),a("el-button",{staticClass:"lf-control-item",attrs:{type:"plain",size:"small"},on:{click:e.zoomReset}},[a("i",{staticClass:"lf-control-fit"}),a("div",{staticClass:"lf-control-text"},[e._v("大小适应")])]),a("el-button",{staticClass:"lf-control-item",attrs:{type:"plain",size:"small",disabled:e.undoDisable},on:{click:e.undo}},[a("i",{staticClass:"lf-control-undo"}),a("div",{staticClass:"lf-control-text"},[e._v("上一步(ctrl+z)")])]),a("el-button",{staticClass:"lf-control-item",attrs:{type:"plain",size:"small",disabled:e.redoDisable},on:{click:e.redo}},[a("i",{staticClass:"lf-control-redo"}),a("div",{staticClass:"lf-control-text"},[e._v("下一步(ctrl+y)")])]),a("el-button",{staticClass:"lf-control-item",attrs:{type:"plain",size:"small"},on:{click:e.translateRest}},[a("i",{staticClass:"lf-control-restore"}),a("div",{staticClass:"lf-control-text"},[e._v("定位还原")])]),a("el-button",{staticClass:"lf-control-item",attrs:{type:e.selectionMode?"primary":"plain",size:"small"},on:{click:e.selection}},[a("i",{staticClass:"lf-control-selection"}),a("div",{staticClass:"lf-control-text"},[e._v(" "+e._s(e.selectionMode?"取消框选":"框选")+" ")])]),a("el-button",{staticClass:"lf-control-item",attrs:{type:"plain",size:"small"},on:{click:e.download}},[a("i",{staticClass:"lf-control-image"}),a("div",{staticClass:"lf-control-text"},[e._v("下载图片")])]),a("el-button",{staticClass:"lf-control-item",attrs:{type:"plain",size:"small"},on:{click:e.catData}},[a("i",{staticClass:"lf-control-download"}),a("div",{staticClass:"lf-control-text"},[e._v("查看数据")])]),a("el-button",{staticClass:"lf-control-item",attrs:{type:"plain",size:"small"},on:{click:e.loadDemo}},[a("i",{staticClass:"lf-control-upload"}),a("div",{staticClass:"lf-control-text"},[e._v("加载示例")])])],1)],1)},N=[],S=a("0ff5"),P=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){var e;return Object(y["a"])(this,a),e=t.apply(this,arguments),e.undoDisable=!0,e.redoDisable=!0,e.graphData=null,e.dataVisible=!1,e.selectionMode=!1,e}return Object(h["a"])(a,[{key:"mounted",value:function(){var e=this;this.lf.on("history:change",(function(t){var a=t.data,o=a.undoAble,r=a.redoAble;e.undoDisable=!o,e.redoDisable=!r}))}},{key:"zoomIn",value:function(){this.lf.zoom(!0)}},{key:"zoomOut",value:function(){this.lf.zoom(!1)}},{key:"zoomReset",value:function(){this.lf.resetZoom()}},{key:"translateRest",value:function(){this.lf.resetTranslate()}},{key:"reset",value:function(){this.lf.resetZoom(),this.lf.resetTranslate()}},{key:"undo",value:function(){this.lf.undo()}},{key:"redo",value:function(){this.lf.redo()}},{key:"download",value:function(){this.lf.getSnapshot()}},{key:"catData",value:function(){this.$emit("catData")}},{key:"selection",value:function(){this.selectionMode=!this.selectionMode,this.lf.updateEditConfig({stopMoveGraph:this.selectionMode}),this.selectionMode?_["b"].open():_["b"].close()}},{key:"loadDemo",value:function(){this.lf.render(S)}}]),a}(j["d"]);Object(O["a"])([Object(j["c"])()],P.prototype,"lf",void 0),P=Object(O["a"])([j["a"]],P);var E,$=P,I=$,R=(a("d123"),Object(i["a"])(I,w,N,!1,null,"43c17f3c",null)),T=R.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"node-panel"},e._l(e.nodes,(function(t){return a("div",{key:t.text,staticClass:"node-item",on:{mousedown:function(a){return e.dragNode(t)}}},[a("div",{staticClass:"node-item-icon",class:t.class},["user"===t.type||"time"===t.type?a("div",{staticClass:"shape"}):e._e()]),a("span",{staticClass:"node-label"},[e._v(e._s(t.text))])])})),0)},V=[];a("d81d"),a("a4d3"),a("e01a");(function(e){e["Start"]="start",e["Approval"]="approval",e["System"]="system",e["Gateway"]="gateway",e["End"]="end"})(E||(E={}));var W,z,G,L,F,Y,q,B,U,Z,J,K,H={START:"start",APPROVAL:"approval",SYSTEM:"system",GATEWAY:"gateway",END:"end"},Q={START:"开始",APPROVAL:"审批节点",SYSTEM:"系统任务",GATEWAY:"网关节点",END:"结束"};(function(e){e["Initiator"]="Initiator",e["Approver"]="Approver",e["System"]="System",e["Gateway"]="Gateway",e["Completer"]="Completer"})(W||(W={})),function(e){e["OneAgreed"]="One",e["AllAgreed"]="All"}(z||(z={})),function(e){e["OneAgreed"]="One",e["AllAgreed"]="All"}(G||(G={})),function(e){e["OneAgreed"]="One",e["AllAgreed"]="All"}(L||(L={})),function(e){e["Pass"]="Pass",e["Reject"]="Reject",e["Transmit"]="Transmit",e["Goback"]="Goback",e["Assist"]="Assist",e["Save"]="Save",e["Submit"]="Submit"}(F||(F={})),function(e){e["Initiator"]="Initiator",e["Designator"]="Designator",e["Variable"]="Variable",e["Role"]="Role",e["Api"]="Api"}(Y||(Y={})),function(e){e["Initiator"]="Initiator",e["Designator"]="Designator",e["VariableId"]="VariableId",e["RoleId"]="RoleId",e["Url"]="Url"}(q||(q={})),function(e){e["Eq"]="==",e["Gt"]=">",e["Gte"]=">=",e["Lt"]="<",e["Lte"]="<=",e["Nte"]="!="}(B||(B={})),function(e){e["And"]="&&",e["Or"]="||"}(U||(U={})),function(e){e["Left"]="(",e["Right"]=")"}(Z||(Z={})),function(e){e["Default"]="None",e["Simple"]="Simple",e["Complex"]="Complex"}(J||(J={})),function(e){e["Bracket"]="Bracket",e["Logic"]="Logic",e["Expression"]="Expression"}(K||(K={}));var X;(function(e){e["Condition"]="Condition"})(X||(X={})),function(e){e["Polyline"]="polyline"}(X||(X={}));var ee,te=function(e){return{key:e.key,name:e.name,enName:e.enName,executor:e.executor,description:e.description,aggregation:e.aggregation,branch:e.branch,rule:e.rule,actions:e.actions}},ae=[{value:z.OneAgreed,text:"或签"},{value:z.AllAgreed,text:"会签"}],oe=[{value:G.OneAgreed,text:"单一聚合"},{value:G.AllAgreed,text:"全部聚合"}],re=(L.OneAgreed,L.AllAgreed,F.Pass,F.Reject,F.Assist,F.Save,F.Submit,[{text:Q.START,type:E.Start,class:"node-start",key:H.START,name:Q.START,enName:W.Initiator,executor:{type:Y.Initiator,params:[]},description:"",aggregation:null,branch:L.OneAgreed,rule:z.OneAgreed,actions:[F.Save,F.Submit]},{text:Q.APPROVAL,type:E.Approval,class:"node-approval",key:H.APPROVAL,name:Q.APPROVAL,enName:W.Approver,executor:{type:Y.Designator,params:[]},description:"",aggregation:G.OneAgreed,branch:L.OneAgreed,rule:z.OneAgreed,actions:[F.Pass,F.Reject,F.Assist]},{text:Q.GATEWAY,type:E.Gateway,class:"node-gateway",key:H.GATEWAY,name:Q.GATEWAY,enName:W.Gateway,executor:null,description:"",aggregation:G.OneAgreed,branch:L.OneAgreed,rule:z.OneAgreed,actions:null},{text:Q.END,type:E.End,class:"node-end",key:H.END,name:Q.END,enName:W.Completer,executor:null,description:"",aggregation:G.OneAgreed,branch:null,rule:z.OneAgreed,actions:null}]),ne=function(e){var t=300,a=380,o=200,r=100;if(e){var n=re.find((function(e){return e.type===E.Start})),i=re.find((function(e){return e.type===E.Approval})),l=re.find((function(e){return e.type===E.Approval})),s=re.find((function(e){return e.type===E.Approval})),c=re.find((function(e){return e.type===E.Gateway})),u=re.find((function(e){return e.type===E.End}));if(n&&i&&l&&s&&c&&u){var d=e.addNode({type:E.Start,x:t,y:a,text:{x:1,y:1,value:n.text},properties:Object(m["a"])({},te(n))}),p=te(i);p.key="approval1",p.name="任务1",p.executor={type:Y.Designator,params:[{type:q.Designator,value:{value:"user001",text:"用户1"}}]};var f=e.addNode({type:E.Approval,x:t+o,y:a,text:{x:1,y:1,value:p.name},properties:Object(m["a"])({},p)}),b=te(l);b.key="approval2",b.name="任务2",b.executor={type:Y.Role,params:[{type:q.RoleId,value:{value:"ProjectManager",text:"项目经理"}},{type:q.VariableId,value:{value:"abc",text:"变量1"}}]};var v=e.addNode({type:E.Approval,x:t+2*o,y:a-2*r,text:{x:1,y:1,value:b.name},properties:Object(m["a"])({},b)}),y=te(s);y.key="approval3",y.name="任务3",y.executor={type:Y.Variable,params:[{type:q.VariableId,value:{value:"bcd",text:"变量2"}}]};var h=e.addNode({type:E.Approval,x:t+2*o,y:a+2*r,text:{x:1,y:1,value:y.name},properties:Object(m["a"])({},y)}),g=e.addNode({type:E.Gateway,x:t+2*o,y:a,text:{x:1,y:1,value:c.text},properties:Object(m["a"])({},te(c))}),x=e.addNode({type:E.End,x:t+3*o,y:a,text:{x:1,y:1,value:u.text},properties:Object(m["a"])({},te(u))});e.createEdge({type:X.Polyline,sourceNodeId:d.id,targetNodeId:f.id,text:{value:"",x:t+80,y:a-10}}),e.createEdge({type:X.Polyline,sourceNodeId:f.id,targetNodeId:g.id,text:{value:"",x:t+100+o,y:a-10}});var O={type:J.Simple,expressions:[{type:K.Expression,expression:{variable:"abc",varType:"",operator:">",value:"100000"}}]};e.createEdge({type:X.Polyline,sourceNodeId:g.id,targetNodeId:v.id,text:{value:"金额大于10万",x:t+o+250,y:a-r+15},properties:{name:"金额大于10万",condition:O,enName:X.Condition}}),e.createEdge({type:X.Polyline,sourceNodeId:g.id,targetNodeId:h.id,text:{value:"",x:t+o+220,y:a+r}}),e.createEdge({type:X.Polyline,sourceNodeId:v.id,targetNodeId:x.id,text:{value:"",x:t+3*o+20,y:a-r}}),e.createEdge({type:X.Polyline,sourceNodeId:h.id,targetNodeId:x.id,text:{value:"",x:t+3*o+30,y:a+r}})}}},ie=[{value:J.Default,text:"无"},{value:J.Simple,text:"简单规则"},{value:J.Complex,text:"复杂规则"}],le=[{value:B.Eq,text:"等于"},{value:B.Gt,text:"大于"},{value:B.Gte,text:"大于等于"},{value:B.Lt,text:"小于"},{value:B.Lte,text:"小于等于"},{value:B.Nte,text:"不等于"}],se=[{value:Z.Left,text:Z.Left},{value:Z.Right,text:Z.Right}],ce=[{value:Y.Designator,text:"全员"},{value:Y.Variable,text:"表单变量"},{value:Y.Role,text:"角色"},{value:Y.Api,text:"接口"}];(function(e){e["Number"]="number",e["String"]="string",e["CheckBox"]="checkbox",e["RadioBox"]="radiobox",e["Select"]="select"})(ee||(ee={}));var ue=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){var e;return Object(y["a"])(this,a),e=t.apply(this,arguments),e.nodes=re.map((function(e){return Object({text:e.text,type:e.type,class:e.class})})),e}return Object(h["a"])(a,[{key:"dragNode",value:function(e){this.lf.dnd.startDrag({type:e.type,text:e.text})}}]),a}(j["d"]);Object(O["a"])([Object(j["c"])()],ue.prototype,"lf",void 0),ue=Object(O["a"])([j["a"]],ue);var de=ue,pe=de,fe=(a("73b2"),Object(i["a"])(pe,M,V,!1,null,"ff4cd0b0",null)),be=fe.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vue-json-pretty",{staticClass:"text-left",attrs:{path:"res",data:e.graphData}})],1)},me=[],ye=a("838b"),he=a.n(ye),ge=(a("b83f"),function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){return Object(y["a"])(this,a),t.apply(this,arguments)}return a}(j["d"]));Object(O["a"])([Object(j["c"])()],ge.prototype,"graphData",void 0),ge=Object(O["a"])([Object(j["a"])({components:{VueJsonPretty:he.a}})],ge);var xe=ge,Oe=xe,je=(a("7a98"),Object(i["a"])(Oe,ve,me,!1,null,"43a95678",null)),ke=je.exports,De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"property-dialog"},["start"===e.nodeData.type?a("StartProperty",{attrs:{nodeData:e.nodeData,lf:e.lf},on:{onClose:e.handleClose}}):e._e(),"end"===e.nodeData.type?a("EndProperty",{attrs:{nodeData:e.nodeData,lf:e.lf},on:{onClose:e.handleClose}}):e._e(),"polyline"===e.nodeData.type?a("EdgeProperty",{attrs:{nodeData:e.nodeData,lf:e.lf},on:{onClose:e.handleClose}}):e._e(),"approval"===e.nodeData.type?a("ApprovalProperty",{attrs:{nodeData:e.nodeData,lf:e.lf},on:{onClose:e.handleClose}}):e._e(),"gateway"===e.nodeData.type?a("GatewayProperty",{attrs:{nodeData:e.nodeData,lf:e.lf},on:{onClose:e.handleClose}}):e._e()],1)},_e=[],Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"ruleForm",attrs:{"label-width":"80px",model:e.formData,rules:e.rulesData}},[a("el-form-item",{attrs:{label:"节点标识",prop:"key"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formData.key,callback:function(t){e.$set(e.formData,"key",t)},expression:"formData.key"}})],1),a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"节点描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)},Ae=[],we=(a("caad"),a("2532"),a("159b"),function(e){var t=[],a=[],o=e.getGraphData();return o.nodes.forEach((function(e){var a=e.type,o=e.properties,r=e.id,n=o.key,i=o.name,l=o.enName,s=o.executor,c=o.description,u=o.aggregation,d=o.branch,p=o.rule,f=o.actions;t.push({id:r,type:a,key:n,name:i,enName:l,executor:s,description:c,aggregation:u,branch:d,rule:p,actions:f})})),o.edges.forEach((function(e){var t=e.type,o=e.properties,r=e.id,n=e.sourceNodeId,i=e.targetNodeId,l=o.name,s=o.enName,c=o.condition;a.push({id:r,type:t,sourceNodeId:n,targetNodeId:i,name:l,enName:s,condition:c})})),{Nodes:t,Edges:a}}),Ne=function(e,t,a){if(t){var o=e.message;o||(o="'".concat(t,"'已存在"));var r=we(e.flow),n=r.Nodes.filter((function(t){return t.id!==e.id})).map((function(e){return e.key}));return console.log(n),n.includes(t)?a(new Error(o)):a()}return a()},Se=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){var e;return Object(y["a"])(this,a),e=t.apply(this,arguments),e.formData={key:H.START,name:Q.START,enName:W.Initiator,executor:{type:Y.Initiator,params:[]},description:"",aggregation:null,rule:z.OneAgreed,actions:[F.Save,F.Submit]},e.rulesData={key:[{required:!0,message:"请输入节点标识",trigger:"blur"},{validator:Ne,flow:e.lf,id:e.nodeData.id,trigger:"blur"}],name:[{required:!0,message:"请输入节点名称",trigger:"blur"}]},e}return Object(h["a"])(a,[{key:"mounted",value:function(){var e=this.nodeData.properties;e&&(this.formData=Object.assign({},this.formData,e))}},{key:"onSubmit",value:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(t){var a=e.nodeData.id;e.lf.setProperties(a,e.formData),e.lf.updateText(a,e.formData.name),e.$emit("onClose")}}))}}]),a}(j["d"]);Object(O["a"])([Object(j["c"])()],Se.prototype,"nodeData",void 0),Object(O["a"])([Object(j["c"])()],Se.prototype,"lf",void 0),Se=Object(O["a"])([j["a"]],Se);var Pe=Se,Ee=Pe,$e=(a("079c"),Object(i["a"])(Ee,Ce,Ae,!1,null,"0990562f",null)),Ie=$e.exports,Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"ruleForm",attrs:{"label-width":"80px",model:e.formData,rules:e.rulesData}},[a("el-form-item",{attrs:{label:"节点标识",prop:"key"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formData.key,callback:function(t){e.$set(e.formData,"key",t)},expression:"formData.key"}})],1),a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"聚合方式"}},[a("el-radio-group",{model:{value:e.formData.aggregation,callback:function(t){e.$set(e.formData,"aggregation",t)},expression:"formData.aggregation"}},e._l(e.aggregations,(function(t,o){return a("el-radio-button",{key:o,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)],1),a("el-form-item",{attrs:{label:"节点描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)},Te=[],Me=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){var e;return Object(y["a"])(this,a),e=t.apply(this,arguments),e.aggregations=oe,e.formData={key:H.END,name:Q.END,enName:W.Completer,executor:null,description:"",aggregation:G.AllAgreed,rule:z.OneAgreed,actions:null},e.rulesData={key:[{required:!0,message:"请输入节点标识",trigger:"blur"},{validator:Ne,flow:e.lf,id:e.nodeData.id,trigger:"blur"}],name:[{required:!0,message:"请输入节点名称",trigger:"blur"}]},e}return Object(h["a"])(a,[{key:"mounted",value:function(){var e=this.nodeData.properties;e&&(this.formData=Object.assign({},this.formData,e))}},{key:"onSubmit",value:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(t){var a=e.nodeData.id;e.lf.setProperties(a,e.formData),e.lf.updateText(a,e.formData.name),e.$emit("onClose")}}))}}]),a}(j["d"]);Object(O["a"])([Object(j["c"])()],Me.prototype,"nodeData",void 0),Object(O["a"])([Object(j["c"])()],Me.prototype,"lf",void 0),Me=Object(O["a"])([j["a"]],Me);var Ve=Me,We=Ve,ze=(a("b535"),Object(i["a"])(We,Re,Te,!1,null,"7f2a3448",null)),Ge=ze.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{"label-width":"80px",model:e.formData}},[a("el-form-item",{attrs:{label:"显示名称"}},[a("el-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"执行规则"}},[a("ConditionSetting",{attrs:{condition:e.formData.condition}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)},Fe=[],Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-radio-group",{attrs:{size:"small"},on:{change:e.onChang},model:{value:e.condition.type,callback:function(t){e.$set(e.condition,"type",t)},expression:"condition.type"}},e._l(e.rules,(function(t,o){return a("el-radio",{key:o,attrs:{label:t.value,disabled:"Complex"===t.value}},[e._v(e._s(t.text))])})),1),"Simple"==e.condition.type?a("div",{staticClass:"m-t-10"},[a("el-row",{attrs:{gutter:10}},[e._l(e.condition.expressions,(function(t,o){return["Expression"===t.type?a("Expression",{key:o,attrs:{exp:t.expression}}):e._e()]}))],2)],1):e._e(),"Complex"==e.condition.type?a("div",{staticClass:"m-t-10"}):e._e(),e.condition.expressions.length?a("el-row",{staticClass:"m-t-5"},[a("el-col",{attrs:{span:24}},[e._v(" 规则： "),e._l(e.condition.expressions,(function(t,o){return a("span",{key:o},["Expression"===t.type?a("span",[a("span",[e._v(" "+e._s("${0}".replace("0",t.expression.variable))+" ")]),a("span",[e._v(" "+e._s(t.expression.operator)+" ")]),a("span",[e._v(" "+e._s(t.expression.value)+" ")])]):[e._v(" "+e._s(t.value)+" ")]],2)}))],2)],1):e._e()],1)},qe=[],Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"表单变量"},model:{value:e.exp.variable,callback:function(t){e.$set(e.exp,"variable",t)},expression:"exp.variable"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.fields,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.key}})}))],2)],1),a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"比较操作"},model:{value:e.exp.operator,callback:function(t){e.$set(e.exp,"operator",t)},expression:"exp.operator"}},e._l(e.operators,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value}})})),1)],1),a("el-col",{attrs:{span:8}},[e.varOptions.length?a("el-select",{attrs:{placeholder:"变量值"},model:{value:e.exp.value,callback:function(t){e.$set(e.exp,"value",t)},expression:"exp.value"}},e._l(e.varOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value}})})),1):a("el-input",{attrs:{placeholder:"变量值"},model:{value:e.exp.value,callback:function(t){e.$set(e.exp,"value",t)},expression:"exp.value"}})],1)],1)},Ue=[],Ze=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){var e;return Object(y["a"])(this,a),e=t.apply(this,arguments),e.rules=ie,e.operators=le,e.brackets=se,e}return Object(h["a"])(a,[{key:"varOptions",get:function(){var e=this,t=this.fields.find((function(t){return t.key===e.exp.variable}));return t&&t.options?t.options:[]}}]),a}(j["d"]);Object(O["a"])([Object(j["b"])("fields")],Ze.prototype,"fields",void 0),Object(O["a"])([Object(j["c"])()],Ze.prototype,"exp",void 0),Ze=Object(O["a"])([Object(j["a"])({components:{}})],Ze);var Je=Ze,Ke=Je,He=(a("fe8a"),Object(i["a"])(Ke,Be,Ue,!1,null,"931f86ca",null)),Qe=He.exports,Xe=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){var e;return Object(y["a"])(this,a),e=t.apply(this,arguments),e.rules=ie,e.operators=le,e.brackets=se,e}return Object(h["a"])(a,[{key:"onChang",value:function(){this.condition.expressions=[],this.condition.type!=J.Default&&this.condition.expressions.push({type:K.Expression,expression:{variable:"",varType:"",operator:"==",value:""}})}}]),a}(j["d"]);Object(O["a"])([Object(j["c"])()],Xe.prototype,"condition",void 0),Xe=Object(O["a"])([Object(j["a"])({components:{Expression:Qe}})],Xe);var et=Xe,tt=et,at=(a("6d70"),Object(i["a"])(tt,Ye,qe,!1,null,"69775ffa",null)),ot=at.exports,rt=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){var e;return Object(y["a"])(this,a),e=t.apply(this,arguments),e.formData={name:"",enName:X.Condition,condition:{type:J.Default,expressions:[]}},e}return Object(h["a"])(a,[{key:"mounted",value:function(){var e=this.nodeData.properties;e&&(this.formData=Object.assign({},this.formData,e))}},{key:"onSubmit",value:function(){var e=this.nodeData.id;this.lf.setProperties(e,this.formData),this.lf.updateText(e,this.formData.name),this.$emit("onClose")}}]),a}(j["d"]);Object(O["a"])([Object(j["c"])()],rt.prototype,"nodeData",void 0),Object(O["a"])([Object(j["c"])()],rt.prototype,"lf",void 0),rt=Object(O["a"])([Object(j["a"])({components:{ConditionSetting:ot}})],rt);var nt=rt,it=nt,lt=(a("aee5"),Object(i["a"])(it,Le,Fe,!1,null,"8bead33c",null)),st=lt.exports,ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"ruleForm",attrs:{"label-width":"80px",model:e.formData,rules:e.rulesData}},[a("el-form-item",{attrs:{label:"节点标识",prop:"key"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formData.key,callback:function(t){e.$set(e.formData,"key",t)},expression:"formData.key"}})],1),a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"审批人员"}},[a("ExecutorSetting",{model:{value:e.formData.executor,callback:function(t){e.$set(e.formData,"executor",t)},expression:"formData.executor"}})],1),a("el-form-item",{attrs:{label:"审批规则"}},[a("el-radio-group",{model:{value:e.formData.rule,callback:function(t){e.$set(e.formData,"rule",t)},expression:"formData.rule"}},e._l(e.rules,(function(t,o){return a("el-radio-button",{key:o,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)],1),a("el-form-item",{attrs:{label:"审批动作"}},[a("el-checkbox-group",{model:{value:e.formData.actions,callback:function(t){e.$set(e.formData,"actions",t)},expression:"formData.actions"}},e._l(e.actions,(function(t,o){return a("el-checkbox-button",{key:o,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)],1),a("el-form-item",{attrs:{label:"节点描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)},ut=[],dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{type:"border-card"},model:{value:e.executor.type,callback:function(t){e.$set(e.executor,"type",t)},expression:"executor.type"}},e._l(e.executors,(function(t,o){return a("el-tab-pane",{key:o,attrs:{label:t.text,name:t.value,"body-style":{padding:"5px"},disabled:"Api"===t.value}},[a("span",{attrs:{slot:"label"},slot:"label"},["Designator"===t.value?a("i",{staticClass:"el-icon-user"}):e._e(),"Variable"===t.value?a("i",{staticClass:"el-icon-date"}):e._e(),"Role"===t.value?a("i",{staticClass:"el-icon-menu"}):e._e(),e._v(" "+e._s(t.text)+" ")]),"Designator"===t.value?a("div",[a("el-row",{staticClass:"m-t-10",attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[e._v("关联用户：")]),a("el-col",{attrs:{span:18}},[a("UserFetch",{model:{value:e.params.user,callback:function(t){e.$set(e.params,"user",t)},expression:"params.user"}})],1)],1)],1):"Variable"===t.value?a("div",[a("el-row",{staticClass:"m-t-10",attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[e._v("关联变量： ")]),a("el-col",{attrs:{span:18}},[a("FieldFetch",{model:{value:e.params.variable,callback:function(t){e.$set(e.params,"variable",t)},expression:"params.variable"}})],1)],1)],1):"Role"===t.value?a("div",[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[e._v("关联角色： ")]),a("el-col",{attrs:{span:18}},[a("RoleFetch",{model:{value:e.params.role,callback:function(t){e.$set(e.params,"role",t)},expression:"params.role"}})],1)],1),a("el-row",{staticClass:"m-t-10",attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[e._v("关联变量： ")]),a("el-col",{attrs:{span:18}},[a("FieldFetch",{model:{value:e.params.variable,callback:function(t){e.$set(e.params,"variable",t)},expression:"params.variable"}})],1)],1)],1):e._e()])})),1)],1)},pt=[],ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{filterable:"",placeholder:"请输入关键词"},on:{change:e.onChange},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.options,(function(t,o){return a("el-option",{key:o,attrs:{label:t.text,value:t.value}},[a("span",{staticClass:"float-left"},[e._v(e._s(t.text))]),a("span",{staticClass:"float-right option-left"},[e._v(e._s(t.value))])])})),1)},bt=[],vt=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){var e;return Object(y["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.options=e.users,e.selected="",e}return Object(h["a"])(a,[{key:"onChange",value:function(e){var t=this.users.find((function(t){return t.value==e}));this.$emit("change",t)}},{key:"userChanged",value:function(){this.selected=this.user?this.user.value:""}}]),a}(j["d"]);Object(O["a"])([Object(j["b"])("users")],vt.prototype,"users",void 0),Object(O["a"])([Object(j["c"])()],vt.prototype,"user",void 0),Object(O["a"])([Object(j["e"])("user",{immediate:!0,deep:!0})],vt.prototype,"userChanged",null),vt=Object(O["a"])([Object(j["a"])({model:{prop:"user",event:"change"},components:{}})],vt);var mt=vt,yt=mt,ht=(a("cbbc"),Object(i["a"])(yt,ft,bt,!1,null,"3330c9a8",null)),gt=ht.exports,xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{filterable:"",placeholder:"请输入关键词"},on:{change:e.onChange},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.options,(function(t,o){return a("el-option",{key:o,attrs:{label:t.text,value:t.value}},[a("span",{staticClass:"float-left"},[e._v(e._s(t.text))]),a("span",{staticClass:"float-right option-left"},[e._v(e._s(t.value))])])})),1)},Ot=[],jt=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){var e;return Object(y["a"])(this,a),e=t.apply(this,arguments),e.options=e.roles,e.selected=e.role?e.role.value:"",e}return Object(h["a"])(a,[{key:"onChange",value:function(e){var t=this.roles.find((function(t){return t.value==e}));this.$emit("change",t)}},{key:"roleChanged",value:function(){this.selected=this.role?this.role.value:""}}]),a}(j["d"]);Object(O["a"])([Object(j["b"])("roles")],jt.prototype,"roles",void 0),Object(O["a"])([Object(j["c"])()],jt.prototype,"role",void 0),Object(O["a"])([Object(j["e"])("role",{immediate:!0,deep:!0})],jt.prototype,"roleChanged",null),jt=Object(O["a"])([Object(j["a"])({model:{prop:"role",event:"change"},components:{}})],jt);var kt=jt,Dt=kt,_t=(a("5bbd"),Object(i["a"])(Dt,xt,Ot,!1,null,"7150ff14",null)),Ct=_t.exports,At=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{filterable:"",placeholder:"请输入关键词"},on:{change:e.onChange},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.options,(function(t,o){return a("el-option",{key:o,attrs:{label:t.name,value:t.key}},[a("span",{staticClass:"float-left"},[e._v(e._s(t.name))]),a("span",{staticClass:"float-right option-left"},[e._v(e._s(t.key))])])})),1)},wt=[],Nt=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){var e;return Object(y["a"])(this,a),e=t.apply(this,arguments),e.options=e.fields,e.selected=e.field?e.field.value:"",e}return Object(h["a"])(a,[{key:"onChange",value:function(e){var t=this.fields.find((function(t){return t.key==e}));this.$emit("change",{value:t?t.key:"",text:t?t.name:""})}},{key:"fieldChanged",value:function(){this.selected=this.field?this.field.value:""}}]),a}(j["d"]);Object(O["a"])([Object(j["b"])("fields")],Nt.prototype,"fields",void 0),Object(O["a"])([Object(j["c"])()],Nt.prototype,"field",void 0),Object(O["a"])([Object(j["e"])("field",{immediate:!0,deep:!0})],Nt.prototype,"fieldChanged",null),Nt=Object(O["a"])([Object(j["a"])({model:{prop:"field",event:"change"},components:{}})],Nt);var St=Nt,Pt=St,Et=(a("0408"),Object(i["a"])(Pt,At,wt,!1,null,"dd457372",null)),$t=Et.exports,It=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){var e;return Object(y["a"])(this,a),e=t.apply(this,arguments),e.executors=ce,e.params={user:null,role:null,variable:null,url:null},e}return Object(h["a"])(a,[{key:"executorChanged",value:function(){var e=this.executor.params.find((function(e){return e.type===q.Designator}));this.params.user=e?e.value:null;var t=this.executor.params.find((function(e){return e.type===q.RoleId}));this.params.role=t?t.value:null;var a=this.executor.params.find((function(e){return e.type===q.VariableId}));this.params.variable=a?a.value:null;var o=this.executor.params.find((function(e){return e.type===q.Url}));this.params.url=o?o.value:null}},{key:"paramsChanged",value:function(){var e=[];switch(this.executor.type){case Y.Initiator:break;case Y.Designator:e.push({type:q.Designator,value:this.params.user});break;case Y.Variable:e.push({type:q.VariableId,value:this.params.variable});break;case Y.Role:e.push({type:q.RoleId,value:this.params.role}),e.push({type:q.VariableId,value:this.params.variable});break;case Y.Api:e.push({type:q.Url,value:this.params.url});break;default:break}this.$emit("change",{type:this.executor.type,params:e})}}]),a}(j["d"]);Object(O["a"])([Object(j["b"])("fields")],It.prototype,"fields",void 0),Object(O["a"])([Object(j["b"])("roles")],It.prototype,"roles",void 0),Object(O["a"])([Object(j["b"])("users")],It.prototype,"users",void 0),Object(O["a"])([Object(j["c"])()],It.prototype,"executor",void 0),Object(O["a"])([Object(j["e"])("executor",{immediate:!0,deep:!0})],It.prototype,"executorChanged",null),Object(O["a"])([Object(j["e"])("params",{immediate:!0,deep:!0})],It.prototype,"paramsChanged",null),It=Object(O["a"])([Object(j["a"])({model:{prop:"executor",event:"change"},components:{UserFetch:gt,RoleFetch:Ct,FieldFetch:$t}})],It);var Rt=It,Tt=Rt,Mt=(a("d2ad"),Object(i["a"])(Tt,dt,pt,!1,null,"06860e2b",null)),Vt=Mt.exports,Wt=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){var e;return Object(y["a"])(this,a),e=t.apply(this,arguments),e.rules=ae,e.aggregations=oe,e.actions=[{value:"Pass",text:"同意"},{value:"Reject",text:"拒绝"},{value:"Assist",text:"协审"}],e.formData={key:H.APPROVAL,name:Q.APPROVAL,enName:W.Approver,executor:{type:Y.Designator,params:[]},description:"",aggregation:G.AllAgreed,rule:z.OneAgreed,actions:[F.Pass,F.Reject,F.Assist]},e.rulesData={key:[{required:!0,message:"请输入节点标识",trigger:"blur"},{validator:Ne,flow:e.lf,id:e.nodeData.id,trigger:"blur"}],name:[{required:!0,message:"请输入节点名称",trigger:"blur"}]},e}return Object(h["a"])(a,[{key:"mounted",value:function(){var e=this.nodeData.properties;e&&(this.formData=Object.assign({},this.formData,e))}},{key:"onSubmit",value:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(t){var a=e.nodeData.id;console.log(e.formData),e.lf.setProperties(a,e.formData),e.lf.updateText(a,e.formData.name),e.$emit("onClose")}}))}}]),a}(j["d"]);Object(O["a"])([Object(j["c"])()],Wt.prototype,"nodeData",void 0),Object(O["a"])([Object(j["c"])()],Wt.prototype,"lf",void 0),Wt=Object(O["a"])([Object(j["a"])({components:{ExecutorSetting:Vt}})],Wt);var zt=Wt,Gt=zt,Lt=(a("1415"),Object(i["a"])(Gt,ct,ut,!1,null,"0c340a0d",null)),Ft=Lt.exports,Yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"ruleForm",attrs:{"label-width":"80px",model:e.formData,rules:e.rulesData}},[a("el-form-item",{attrs:{label:"节点标识",prop:"key"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formData.key,callback:function(t){e.$set(e.formData,"key",t)},expression:"formData.key"}})],1),a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"聚合方式"}},[a("el-radio-group",{model:{value:e.formData.aggregation,callback:function(t){e.$set(e.formData,"aggregation",t)},expression:"formData.aggregation"}},e._l(e.aggregations,(function(t,o){return a("el-radio-button",{key:o,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)],1),a("el-form-item",{attrs:{label:"节点描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)},qt=[],Bt=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){var e;return Object(y["a"])(this,a),e=t.apply(this,arguments),e.aggregations=oe,e.formData={key:H.GATEWAY,name:Q.GATEWAY,enName:W.Gateway,executor:null,description:"",aggregation:G.AllAgreed,rule:z.OneAgreed,actions:null},e.rulesData={key:[{required:!0,message:"请输入节点标识",trigger:"blur"},{validator:Ne,flow:e.lf,id:e.nodeData.id,trigger:"blur"}],name:[{required:!0,message:"请输入节点名称",trigger:"blur"}]},e}return Object(h["a"])(a,[{key:"mounted",value:function(){var e=this.nodeData.properties;e&&(this.formData=Object.assign({},this.formData,e))}},{key:"onSubmit",value:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(t){var a=e.nodeData.id;e.lf.setProperties(a,e.formData),e.lf.updateText(a,e.formData.name),e.$emit("onClose")}}))}}]),a}(j["d"]);Object(O["a"])([Object(j["c"])()],Bt.prototype,"nodeData",void 0),Object(O["a"])([Object(j["c"])()],Bt.prototype,"lf",void 0),Bt=Object(O["a"])([j["a"]],Bt);var Ut=Bt,Zt=Ut,Jt=(a("0a7b"),Object(i["a"])(Zt,Yt,qt,!1,null,"6efb4155",null)),Kt=Jt.exports,Ht=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){return Object(y["a"])(this,a),t.apply(this,arguments)}return Object(h["a"])(a,[{key:"handleClose",value:function(){this.$emit("setPropertiesFinish")}}]),a}(j["d"]);Object(O["a"])([Object(j["c"])()],Ht.prototype,"nodeData",void 0),Object(O["a"])([Object(j["c"])()],Ht.prototype,"lf",void 0),Ht=Object(O["a"])([Object(j["a"])({components:{StartProperty:Ie,EndProperty:Ge,EdgeProperty:st,ApprovalProperty:Ft,GatewayProperty:Kt}})],Ht);var Qt=Ht,Xt=Qt,ea=(a("4be6"),Object(i["a"])(Xt,De,_e,!1,null,"75184d58",null)),ta=ea.exports,aa=a("45eb"),oa=a("7e84");a("cb29");function ra(e){e.register(E.Start,(function(e){var t=e.CircleNode,a=e.CircleNodeModel,o=e.h,r=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){return Object(y["a"])(this,a),t.apply(this,arguments)}return Object(h["a"])(a,[{key:"getLabelShape",value:function(){var e=this.getAttributes(),t=e.x,a=e.y;return o("text",{fill:"#000000",fontSize:12,x:t-12,y:a+4,width:50,height:25},"")}},{key:"getShape",value:function(){var e=this.getAttributes(),t=e.x,a=e.y,r=e.r,n=e.fill,i=e.stroke,l=e.strokeWidth;return o("g",{},[o("circle",{cx:t,cy:a,r:r,fill:n,stroke:i,strokeWidth:l}),this.getLabelShape()])}}]),a}(t),n=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(e,o){return Object(y["a"])(this,a),e.text={value:e.text&&e.text.value||Q.START,x:e.x,y:e.y,dragable:!1,editable:!1},t.call(this,e,o)}return Object(h["a"])(a,[{key:"getConnectedTargetRules",value:function(){var e=Object(aa["a"])(Object(oa["a"])(a.prototype),"getConnectedTargetRules",this).call(this),t={message:"起始节点不能作为连线的终点",validate:function(){return!1}};return e.push(t),e}}]),a}(a);return{view:r,model:n}}))}var na={width:100,height:70,text_offsetY:60,icon_width:25,icon_height:25,radius:5},ia={icon_width:40,icon_height:40,text_offsetY:48},la={size:50,icon_width:23,icon_height:23,text_offsetY:48};function sa(e){e.register(E.End,(function(e){var t=e.CircleNode,a=e.CircleNodeModel,o=e.h,r=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){return Object(y["a"])(this,a),t.apply(this,arguments)}return Object(h["a"])(a,[{key:"getIconShape",value:function(){var e=this.getAttributes(),t=e.x,a=e.y,r=e.width,n=e.height,i="#404040";return o("svg",{x:t-r/2,y:a-n/2,width:ia.icon_width,height:ia.icon_height,viewBox:"0 0 1024 1024"},o("path",{fill:i,d:"M212.992 526.336 212.992 526.336 212.992 526.336 215.04 526.336 212.992 526.336Z"}),o("path",{fill:i,d:"M724.992 296.96 724.992 296.96 296.96 296.96 296.96 724.992 724.992 724.992 724.992 296.96Z"}))}},{key:"getShape",value:function(){var e=this.getAttributes(),t=e.x,a=e.y,r=e.r,n=e.fill,i=e.stroke,l=e.strokeWidth;return o("g",{},[o("circle",{cx:t,cy:a,r:r,fill:n,stroke:i,strokeWidth:l}),this.getIconShape()])}}]),a}(t),n=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(e,o){return Object(y["a"])(this,a),e.text={value:e.text&&e.text.value||"",x:e.x,y:e.y+ia.text_offsetY,dragable:!1,editable:!1},t.call(this,e,o)}return Object(h["a"])(a,[{key:"getConnectedSourceRules",value:function(){var e=Object(aa["a"])(Object(oa["a"])(a.prototype),"getConnectedSourceRules",this).call(this),t={message:"终止节点不能作为连线的起点",validate:function(){return!1}};return e.push(t),e}}]),a}(a);return{view:r,model:n}}))}a("99af"),a("a15b");var ca="#9932CC";function ua(e){e.register(E.Gateway,(function(e){var t=e.PolygonNode,a=e.PolygonNodeModel,o=e.h,r=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){return Object(y["a"])(this,a),t.apply(this,arguments)}return Object(h["a"])(a,[{key:"getIconShape",value:function(){return o("svg",{x:14,y:14,width:la.icon_width,height:la.icon_height,viewBox:"0 0 1024 1024"},o("path",{fill:ca,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))}},{key:"getShape",value:function(){var e=this.getAttributes(),t=e.width,a=e.height,r=e.x,n=e.y,i=e.fill,l=e.fillOpacity,s=e.strokeWidth,c=e.stroke,u=e.strokeOpacity,d=e.points,p="matrix(1 0 0 1 ".concat(r-t/2," ").concat(n-a/2,")"),f=d.map((function(e){return e.join(",")})).join(" ");return o("g",{transform:p},[o("polygon",{points:f,fill:i,stroke:c,strokeWidth:s,strokeOpacity:u,fillOpacity:l}),this.getIconShape()])}}]),a}(t),n=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(e,o){var r;Object(y["a"])(this,a),e.text={value:e.text&&e.text.value||Q.GATEWAY,x:e.x,y:e.y+la.text_offsetY},r=t.call(this,e,o);var n=la.size/2;return r.points=[[n,0],[2*n,n],[n,2*n],[0,n]],r.stroke=ca,r}return a}(a);return{view:r,model:n}}))}function da(e){e.register(E.Approval,(function(e){var t=e.PolygonNode,a=e.PolygonNodeModel,o=e.h,r=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){return Object(y["a"])(this,a),t.apply(this,arguments)}return Object(h["a"])(a,[{key:"getShape",value:function(){var e=this.getAttributes(),t=e.width,a=e.height,r=e.x,n=e.y,i=e.fill,l=e.strokeWidth,s=e.stroke,c={x:r-t/2,y:n-a/2,width:na.width,height:na.height,stroke:s,fill:i,strokeWidth:l,rx:na.radius,ry:na.radius};return o("g",{},[o("rect",Object(m["a"])({},c)),o("svg",{x:r-t/2+5,y:n-a/2+5,width:na.icon_width,height:na.icon_height,viewBox:"0 0 1274 1024"},o("path",{fill:s,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))])}}]),a}(t),n=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(e,o){var r;Object(y["a"])(this,a),e.text={value:e.text&&e.text.value||Q.APPROVAL,x:e.x,y:e.y+na.text_offsetY},r=t.call(this,e,o);var n=na.width/2,i=na.height/2;return r.points=[[n,0],[2*n,i],[n,2*i],[0,i]],r}return a}(a);return{view:r,model:n}}))}function pa(e){e.register(E.System,(function(e){var t=e.PolygonNode,a=e.PolygonNodeModel,o=e.h,r=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){return Object(y["a"])(this,a),t.apply(this,arguments)}return Object(h["a"])(a,[{key:"getShape",value:function(){var e=this.getAttributes(),t=e.width,a=e.height,r=e.x,n=e.y,i=e.fill,l=e.strokeWidth,s=e.stroke,c={x:r-t/2,y:n-a/2,width:na.width,height:na.height,stroke:s,fill:i,strokeWidth:l,rx:na.radius,ry:na.radius};return o("g",{},[o("rect",Object(m["a"])({},c)),o("svg",{x:r-t/2+5,y:n-a/2+5,width:na.icon_width,height:na.icon_height,viewBox:"0 0 1274 1024"},o("path",{fill:s,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))])}}]),a}(t),n=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(e,o){var r;Object(y["a"])(this,a),e.text={value:e.text&&e.text.value||Q.SYSTEM,x:e.x,y:e.y+na.text_offsetY},r=t.call(this,e,o);var n=na.width/2,i=na.height/2;return r.points=[[n,0],[2*n,i],[n,2*i],[0,i]],r}return a}(a);return{view:r,model:n}}))}function fa(e){e.register(X.Polyline,(function(e){var t=e.PolylineEdge,a=e.PolylineEdgeModel,o=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(e,o){return Object(y["a"])(this,a),t.call(this,e,o)}return a}(a);return{view:t,model:o}}))}var ba=function(e){Object(g["a"])(a,e);var t=Object(x["a"])(a);function a(){var e;return Object(y["a"])(this,a),e=t.apply(this,arguments),e.lf=null,e.clickNode=null,e.dialogVisible=!1,e.graphData=null,e.dataVisible=!1,e}return Object(h["a"])(a,[{key:"mounted",value:function(){this.init()}},{key:"getData",value:function(){if(this.lf){var e=this.lf.getGraphData();return e}return null}},{key:"init",value:function(){var e=document.querySelector("#flow-view");if(e){D.a.use(_["a"]),D.a.use(_["c"]),D.a.use(_["b"]);var t=C(e,this.isSilentMode);this.lf=new D.a(Object(m["a"])({},t)),this.setMenu(),this.lf.setTheme(A),this.registerNodes(),this.registerEdges(),this.lf.render({}),ne(this.lf),this.register_event()}}},{key:"setMenu",value:function(){var e=this;if(this.lf&&(this.lf.setMenuConfig({nodeMenu:[],edgeMenu:[]}),!this.isSilentMode)){var t={nodeMenu:[{text:"属性",callback:function(t){e.clickNode=t,e.dialogVisible=!0}},{text:"删除",callback:function(t){console.log("node delete: ",t),e.lf&&e.lf.deleteNode(t.id)}}],edgeMenu:[{text:"属性",callback:function(t){e.clickNode=t,e.dialogVisible=!0}},{text:"删除",callback:function(t){console.log("edge delete: ",t),e.lf&&e.lf.deleteEdge(t.id)}}]};this.lf.addMenuConfig(t)}}},{key:"registerNodes",value:function(){this.lf&&(ra(this.lf),da(this.lf),ua(this.lf),pa(this.lf),sa(this.lf))}},{key:"registerEdges",value:function(){this.lf&&fa(this.lf)}},{key:"register_event",value:function(){var e=this;this.lf&&(this.lf.on("node:click",(function(t){var a=t.data;e.clickNode=a})),this.lf.on("node:dbclick",(function(t){var a=t.data;e.clickNode=a,e.dialogVisible=!0})),this.lf.on("edge:dbclick",(function(t){var a=t.data;e.clickNode=a,e.dialogVisible=!0})),this.lf.on("edge:click",(function(t){var a=t.data;e.clickNode=a})),this.lf.on("connection:not-allowed",(function(t){e.$message({type:"error",message:t.msg})})),this.lf.on("node:add",(function(t){var a=t.data,o=re.find((function(e){return e.type===a.type})),r=o?te(o):null;if(e.lf&&r){var n=we(e.lf),i=e.getKey(n,r.key,r.key,1,a.id),l=e.getName(n,r.name,r.name,1,a.id);r.key=i,r.name=l,e.lf.setProperties(a.id,r),a=e.lf.getNodeData(a.id)}e.clickNode=a,e.dialogVisible=!0})),this.lf.on("edge:add",(function(t){var a=t.data,o={name:"",enName:X.Condition,condition:{type:J.Default,expressions:[]}};e.lf&&e.lf.setProperties(a.id,o)})))}},{key:"getKey",value:function(e,t,a,o,r){var n=e.Nodes.filter((function(e){return e.key===a&&e.id!==r})).length;return 0===n?a:this.getKey(e,t,t+o,o+1,r)}},{key:"getName",value:function(e,t,a,o,r){var n=e.Nodes.filter((function(e){return e.name===a&&e.id!==r})).length;return 0===n?a:this.getName(e,t,t+o,o+1,r)}},{key:"closeDialog",value:function(){this.dialogVisible=!1}},{key:"catData",value:function(){this.graphData=this.lf?this.lf.getGraphData():null,this.dataVisible=!0}}]),a}(j["d"]);Object(O["a"])([Object(j["c"])()],ba.prototype,"bodyStyle",void 0),Object(O["a"])([Object(j["c"])()],ba.prototype,"isSilentMode",void 0),ba=Object(O["a"])([Object(j["a"])({components:{Control:T,NodePanel:be,DataPanel:ke,PropertyPanel:ta}})],ba);var va=ba,ma=va,ya=(a("f8ad"),Object(i["a"])(ma,b,v,!1,null,"748123bb",null)),ha=ya.exports,ga={name:"Home",components:{Flow:ha},provide:{fields:[{key:"abc",name:"变量1",type:"string"},{key:"bcd",name:"变量2",type:"string"},{key:"cde",name:"变量3",type:"select",options:[{value:"Yes",text:"是"},{value:"No",text:"否"}]},{key:"def",name:"变量4",type:"number"},{key:"efg",name:"变量5",type:"checkbox",options:[{value:"1",text:"选项1"},{value:"2",text:"选项2"}]},{key:"fgh",name:"变量6",type:"radiobox",options:[{value:"a",text:"选项a"},{value:"b",text:"选项b"}]}],roles:[{value:"ProjectManager",text:"项目经理"},{value:"Cash",text:"出纳"},{value:"Ceo",text:"总裁"}],users:[{value:"user001",text:"用户1"},{value:"user002",text:"用户2"},{value:"user003",text:"用户3"}]}},xa=ga,Oa=Object(i["a"])(xa,p,f,!1,null,null,null),ja=Oa.exports;o["default"].use(d["a"]);var ka=[{path:"/",name:"Home",component:ja},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}}],Da=new d["a"]({mode:"history",base:"/AvigatorFlow/",routes:ka}),_a=Da,Ca=a("2f62");o["default"].use(Ca["a"]);var Aa=new Ca["a"].Store({state:{},mutations:{},actions:{},modules:{}}),wa=a("5c96"),Na=a.n(wa);a("0fae");o["default"].use(Na.a),o["default"].config.productionTip=!1,new o["default"]({router:_a,store:Aa,render:function(e){return e(c)}}).$mount("#app")},d123:function(e,t,a){"use strict";a("0135")},d2ad:function(e,t,a){"use strict";a("9a98")},d787:function(e,t,a){},e75d:function(e,t,a){},f8ad:function(e,t,a){"use strict";a("5ba4")},fa15:function(e,t,a){},fe8a:function(e,t,a){"use strict";a("9ff4")}});
//# sourceMappingURL=app.88da80bc.js.map